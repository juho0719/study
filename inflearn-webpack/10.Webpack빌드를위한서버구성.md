# Webpack 빌드를 위한 서버 구성
- `webpack-dev-server` : webpack 자체에서 제공하는 개발 서버. 빠른 리로딩 기능 제공 
- `webpack-dev-middleware` : 서버가 이미 구성된 경우에는 webpack을 미들웨어로 구성하여 서버와 연결 

## Webpack Dev Server 소개
- 페이지 자동 고침을 제공하는 webpack 개발용 node.js 서버

#### 설치 및 실행
- 아래 명령어로 dev-server 설치
```
npm install --save-dev webpack-dev-server
```
- 설치 후 아래 명령어로 서버 실행 
```
webpack-dev-server --open
```
- 또는 package.json에 아래와 같이 명령어를 등록하여 간편하게 실행가능 
```json
"scripts": { "start": "webpack-dev-server" }
```

#### Option
- `publicPath` : Webpack으로 번들한 파일들이 위치하는 곳. default 값은 `/`
```
// 항상 `/`를 앞뒤에 붙여야 한다.
publicPath: "/assets/"
```
- `contentBase` : 서버가 로딩할 static 파일 경로를 지정. default 값은 `working directory`
```
// 절대 경로를 사용할 것 
contentBase: path.join(__dirname, "public")
// 비활성화
contentBase: false
```
- `compress` : gzip 압축 방식을 이용하여 웹 자원의 사이즈를 줄인다.
```
compress: true
```

#### Webpack Dev Server Setting
- webpack-dev-server 설치 

(case1) npm설치 후 실행
```
npm install webpack webpack-dev-server --save-dev
webpack-dev-server --open
```
(case2) package.json에 start script 추가
```json
"scripts": { "start": "webpack-dev-server" }
```

- example
1. package.json 생성
2. index.html 생성
```html
<html>
    <head>
        <title>Webpack Dev Server</title>
    </head>
    <body>
        <div class="container">
            hello
        </div>
        <script src="/dist/bundle.js"></script>
    </body>
</html>
```
3. app/index.js 추가
```javascript
var ele = document.getElementsByClassName('container')[0];
ele.innerText = "Webpack loaded!!";
```
4. Add webpack.config.js
```javascript
var path = require('path');

module.exports = {
    entry: './app/index.js',
    output: {
        filename: 'bundle.js',
        path: path.resolve(__dirname, 'dist'),
        publicPath: 'dist'
    },
    devtool: "cheap-eval-source-map",
    devServer: {
        publicPath: "/dist/",
        port: 9000
    },
};
```
5. npm start를 통해 webpack-dev-server 실행

## Webpack Dev Middleware